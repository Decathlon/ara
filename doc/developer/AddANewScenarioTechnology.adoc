= Adding a new testing framework

Before reading this section, it is advised to read first <<../uploads/HowItWorks.adoc#head, how ARA executions works>>. +
This documentation aims to show how to contribute to ARA by adding a testing technology that isn't yet supported.

== What and where should I add my contribution ?

In order to add your contribution to ARA, you'll need to know where to apply it.
Below is what you need to add or update:

=== The code

. *Package*: +
The test scenarios processing are divided into multiple packages depending on the technology used.
You can find them in the package `com.decathlon.ara.scenario` (in the `*[ara-server]*` module). You can then create here a new package with the name of the technology you want to implement, next to the already existing ones.
+
image::images/scenario/scenario_package.png[The scenario package]
In order to respect the project homogeneity, it is highly recommended to keep the same package structure.
. *Indexer*: +
Once the package created, you can add a scenario indexer, i.e. the code that will turn your raw executed test results files into objects that ARA can use.
Create a class that implements `com.decathlon.ara.scenario.common.indexer.ScenariosIndexer` and implement the method,
+
[source,java]
----
List<ExecutedScenario> getExecutedScenarios(File parentFolder, Run run);
----
You can take a look into the *Postman* (`com.decathlon.ara.scenario.postman.indexer.PostmanScenariosIndexer`) or *Cucumber* (`com.decathlon.ara.scenario.cucumber.indexer.CucumberScenariosIndexer`) scenario indexer to have an idea about the implementation.

. *Technology enum*: +
Once the scenario indexer is implemented, you now need to add the new `Technology` to the available technologies.
+
[source,java]
----
include::../../database/src/main/java/com/decathlon/ara/domain/enumeration/Technology.java[]
----

. *Strategy class*: +
You now need to let your code know which indexer to choose depending on the technology.
The design pattern strategy solves this problem.
Update the
+
[source,java]
----
public Optional<ScenariosIndexer> getScenariosIndexer(Technology technology);
----
method in the `com.decathlon.ara.scenario.common.strategy.ScenariosIndexerStrategy` class.
You can add a `case` statement to the `switch` to match the technology you've just added to choose the newly implemented indexer.

=== The database

Before processing your executed scenarios tests results, ARA needs to link the `type` folders name with the existing types saved in the database.
A technology has one or more types and each `type` is linked to a `source`. Insert the corresponding types and sources matching your project and technology.

=== The documentation

It's your turn to document how to use your test framework results! +
In the `doc` folder in your ARA project, add your documentation in the `uploads` directory.
If you want an idea on how to write it, you can check the <<../uploads/UploadPostman.adoc#head, Postman>>, <<../uploads/UploadCucumber.adoc#head, Cucumber>>, or any other test framework related documentation.

== Thank you for contributing to ARA!